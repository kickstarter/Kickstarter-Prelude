machine:
  xcode:
    version: 7.3
dependencies:
  pre:
    - brew update
    - brew unlink swiftlint
    - brew install swiftlint
    - brew link swiftlint
test:
  override:
    - set -o pipefail &&
      swiftlint lint --strict --reporter json |
      tee $CIRCLE_ARTIFACTS/swiftlint-report.json
    - bin/test iOS
    - bin/test tvOS
experimental:
  notify:
    branches:
      only:
        - master
